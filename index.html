<!-- index.html — FutureScans Web App UI (Tabs + Partial Includes) -->
<!doctype html>
<html>
  <head>
    <base target="_top" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FutureScans</title>

    <style>
      :root{
        --bg:#E5EEFB;
        --surface:#ffffff;
        --border:rgba(0,42,123,.18);
        --text:#002A7B;
        --muted:rgba(0,42,123,.65);
        --muted2:rgba(0,42,123,.45);
        --link:#002A7B;
        --accent:#FF7300;
        --accent-soft:rgba(255,115,0,.18);
      }

      * { box-sizing: border-box; }

      /* ✅ Whole-page scroll */
      html,body{
        height:auto;
        min-height:100%;
        overflow:auto;
      }

      body{
        margin:0;
        font-family: Arial, Helvetica, sans-serif;
        background: radial-gradient(1200px 700px at 15% 10%, rgba(0,42,123,.12), transparent 60%),
                    radial-gradient(900px 600px at 80% 12%, rgba(255,115,0,.14), transparent 55%),
                    var(--bg);
        color:var(--text);

        /* ✅ Allow natural document height growth */
        min-height:100vh;
        display:block;
      }

      /* ===== Topbar + Tabs ===== */
      .topbar{
        position: relative;
        z-index: 50;
        padding: 12px 14px;
        border-bottom: 1px solid var(--border);
        background: rgba(255,255,255,.88);
        backdrop-filter: blur(10px);
      }

      .topbarRow{
        max-width: 1200px;
        margin: 0 auto;
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:12px;
      }

      .brand{
        display:flex;
        align-items:center;
        gap:10px;
        min-width: 220px;
      }
      .logoDot{
        width:12px;height:12px;border-radius:999px;
        background: linear-gradient(135deg, var(--accent), rgba(0,42,123,.2));
        box-shadow: 0 0 16px rgba(255,115,0,.35);
      }
      .brand h1{
        margin:0;
        font-size:16px;
        letter-spacing:.2px;
      }
      .brand span{
        display:block;
        font-size:12px;
        color:var(--muted);
        margin-top:2px;
      }

      .tabs{
        display:flex;
        gap:8px;
        flex-wrap:wrap;
        justify-content:center;
      }
      .tab{
        border:1px solid var(--border);
        background: var(--surface);
        color:var(--text);
        padding:7px 12px;
        border-radius:999px;
        cursor:pointer;
        font-size:12px;
        white-space: nowrap;
      }
      .tab.active{
        border-color: var(--accent);
        background: var(--accent-soft);
      }

      /* ===== Pages container =====
         NOTE: use #app-wrap (not .wrap) to avoid clashing with RawArticles' .wrap class
      */
      #app-wrap{
        max-width: 1200px;
        width: 100%;
        margin: 0 auto;
        padding: 12px 14px 24px;
        overflow: visible; /* ✅ allow page to grow and scroll */
      }

      .page{
        display:none;
        overflow: visible; /* ✅ let content size naturally */
      }
      .page.active{
        display:block;
      }

      @media (max-width: 980px){
        .topbarRow{ flex-wrap: wrap; }
        .brand{ min-width: unset; }
      }
    </style>
  </head>

  <body>
    <div class="topbar">
      <div class="topbarRow">
        <div class="brand">
          <div class="logoDot"></div>
          <div>
            <h1>FutureScans</h1>
            <span>Raw • Picks • Rules • Feeds • Report</span>
          </div>
        </div>

        <div class="tabs">
          <button class="tab active" data-page="raw">Raw Articles</button>
          <button class="tab" data-page="picks">Weekly Picks</button>
          <button class="tab" data-page="rules">Theme Rules</button>
          <button class="tab" data-page="feeds">RSS Feeds</button>
          <button class="tab" data-page="report">Report Generator</button>
        </div>
      </div>
    </div>

    <div id="app-wrap">
      <div id="page-raw" class="page active">
        <?!= include("RawArticles"); ?>
      </div>

      <div id="page-picks" class="page">
        <?!= include("Picks"); ?>
      </div>

      <div id="page-rules" class="page">
        <?!= include("ThemeRules"); ?>
      </div>

      <div id="page-feeds" class="page">
        <?!= include("RSSFeeds"); ?>
      </div>

      <div id="page-report" class="page">
        <?!= include("ReportPage"); ?>
      </div>
    </div>

    <script>
      function showPage(pageKey){
        document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
        document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));

        const page = document.getElementById("page-" + pageKey);
        const tab  = document.querySelector('.tab[data-page="' + pageKey + '"]');

        if (page) page.classList.add("active");
        if (tab) tab.classList.add("active");

        // init hooks
        if (pageKey === "raw"    && typeof window.__init_raw    === "function") window.__init_raw();
        if (pageKey === "picks"  && typeof window.__init_picks  === "function") window.__init_picks();
        if (pageKey === "rules"  && typeof window.__init_rules  === "function") window.__init_rules();
        if (pageKey === "feeds"  && typeof window.__init_feeds  === "function") window.__init_feeds();
        if (pageKey === "report" && typeof window.__init_report === "function") window.__init_report();
      }

      document.querySelectorAll(".tab").forEach(btn => {
        btn.addEventListener("click", () => showPage(btn.dataset.page));
      });

      showPage("raw");
    </script>
  </body>
</html>
